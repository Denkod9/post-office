# 1. Цель проекта
---
Цель проекта — Спроектировать Web-приложение почтового отделения для управления подписками на периодические издания. Помимо этого в Системе должна быть предусмотрена интеграция с Telegram ботом, который будет присылать приложения для анроид почтальонам.

# 2. Описание системы
---
Система состоит из следующих основных функциональных блоков:

1.  Регистрация, аутентификация и авторизация
2.  Функционал для заведующего почтовым отделением
3.  Функционал для оператора почтового отделения
4.  Функционал оплаты подписки и главной страницы
5.  Функционал для подписчик
6.  Функционал интеграции с Telegram

### 2.1. Типы пользователей
---
Система предусматривает четыре типа пользователей системы: заведующий, оператор, почтальон и подписчик

### 2.2. Регистрация
---
Процесс входа в аккаунт заведующего и оператора в инсталляции Системы может быть реализован в первой версии не в интерфейсе Системы, а при помощи команды на сервере, это допускается. Этой команде должны быть переданы на вход следующие данные:

email — обязательное поле
пароль — обязательное поле

Процесс регистрации подписчиков, конечно, должен быть реализован в интерфейсах Системы. При регистрации подписчика должны быть запрошены следующие поля:

email — обязательное поле
имя и фамилия — обязательное поле
адрес - обязательное поле
телефон — опциональное поле
После отправки формы регистрации подписчика ему на email приходит письмо с первым кодом, по которому он может войти. Аутентификация будет происходить по разовым кодам, приходящим на email.

### 2.3. Аутентификация заведующего, оператора и подписчиков
---
Аутентификация заведующего, оператора и подписчиков осуществляется по email и одноразовому паролю (или по одноразовой ссылке), который приходит на этот email (как реализовано при входе в Skype у Microsoft).

### 2.4. Функционал для заведующего, оператора, почтальона и подписчико
---
Заведующий после аутентификации (ввода логина и пароля) получает доступ к своему функционалу в Системе. Этот функционал состоит из следующих блоков:

- добовление, редактирование, удаление подписчиков
- добовление, редактирование, удаление Улиц, Адресов и О почтовом отделении
- добовление, редактирование, удаление Типов изданий, Изданий и Подписок
- отчеты
- и возможности оператора

Оператор после аутентификации (ввода логина и пароля) получает доступ к своему функционалу в Системе. Этот функционал состоит из следующих блоков:

- добовление, редактирование, удаление Доставок
- добовление, редактирование, удаление Участвок и улиц на участках
- добовление, редактирование, удаление Почтальонов

Почтальон и Подписчик после аутентификации (ввода логина и пароля) получает доступ к своему функционалу в Системе. Этот функционал состоит из следующих блоков:

- подписаться на издание
- отписаться от издания

### 2.5. Функционал оплаты подписки и главной страницы
---
Главная страница Системы - это список изданий. Если смотрит гость, то он видит только издания, открытые для всех. На этой же странице есть кнопки подписаться на издание, которая перекидывет пользователя либо на его аккаунт вместе с изданием, либо на окно регистрации(входа) для гостя(пользователя) для последующей оплаты.

При оплате подписки должна быть возможность оплатить сразу за 1. 3, 6 или 12 месяцев.

Количество подписчиков должно показываться общим числом где-то на той же главной странице Системы.

Также в описании издания должно быть количество подписчиков которое подписалось на данное издание.

### 2.5.1. Рекуррентные платежи
---
Рекуррентные платежи должны списываться через 30 дней после предыдущей оплаты. Если снять платёж не удалось — в течение ближайших 5 дней должна осуществляться ежедневная попытка списать сумму. В течение этих 5 дней доступ сохраняется, а подписчик получает после каждой неуспешной попытки письмо на email. После успешного снятия суммы за подписку подписчик также получает письмо на email.

После 5 дней неуспешных попыток списать сумму подписка останавливается и подписчик теряет доступ к изданию.

Шаблоны писем не редактируется в интерфейсах Системы, жёстко зашиты в самой системе и их можно отредактировать только изменяя эти шаблоны в коде Системы.

### 2.6. Функционал для подписчика
---
Подписчик может смотреть издания, также может приобрести больше изданий.

Комментариев под изданиями не подразумевается.

Также у подписчика должна быть возможность на странице своего профиля отредактировать его данные (имя, фамилия, email, адрес, номер телефона, дата рождения и сменить пароль) и отменить подписку, что приведёт к остановке рекуррентных ежемесячных платежей и после даты окончания оплаченного периода подписчик отписывается автоматически от издания.

В профиле должна быть возможность отключить email сообщения от системы.

### 2.7. Функционал интеграции с Telegram
---
Система должна отправлять приветствие работников почты и отправлять им андроид приложение для последующей работы.

### 3. Предлагаемый стек технологий
---
Для реализации системы предлагается следующий стек технологий:

###### Бэкенд:
* Язык Python
* Django
* Django REST Framework
* База данных: MySQL
* Aiogram для интеграции с Telegram
###### Фронтенд:
* React
* Bootstrap
